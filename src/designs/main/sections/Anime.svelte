<script>
	import anime from "bits/anime.json";

	let show_all = $state(false);

	function toggle() {
		show_all = !show_all;
	}

	function getTagAmount(tag) {
		return anime.filter((it) => it.tags?.includes(tag)).length;
	}
</script>


<p>
	kinda incomplete and disorganized
	also some anime may be listed multiple times when i rewatch
</p>

<div class="list">
	<div class="item">
		<p>âœ… = finished ({getTagAmount("âœ…")})</p>
		<p>â–¶ï¸ = trying to finish ({getTagAmount("â–¶ï¸")})</p>
		<p>â” = unsure to finish ({getTagAmount("â”")})</p>
		<p>âŒ = dropped ({getTagAmount("âŒ")})</p>
	</div>
	<div class="item">
		<p>ğŸ¥š = it's cool ({getTagAmount("ğŸ¥š")})</p>
		<p>ğŸ›¢ï¸ = it's neat ({getTagAmount("ğŸ›¢ï¸")})</p>
		<p>ğŸ†— = it's ok ({getTagAmount("ğŸ†—")})</p>
		<p>ğŸ«€ = it's meh ({getTagAmount("ğŸ«€")})</p>
	</div>
</div>



<div class="list">
	{#each anime as item, i}
		{#if i < 20 || show_all}
			<div class="item">
				<p>
					{#each item.tags as tag}
						<span>
							{tag}
						</span>
					{/each}

					{#if item.link}
						<small>
							<a href={item.link} target="_blank">(link)</a>
						</small>
					{/if}
				</p>

				<p>
					<b>{item.name}</b>

					<br>
					
					{#if item.text}
						<small>
							{item.text?.join("\n")}
						</small>
					{/if}
				</p>
			</div>
		{/if}
	{/each}
</div>

<div class="list">
	<button onclick={toggle}>
		{#if show_all == false}
			ğŸŒŠ show {anime.length} items
		{:else}
			ğŸ§‚ reset items
		{/if}
	</button>
</div>