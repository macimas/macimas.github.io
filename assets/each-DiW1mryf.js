import{a7 as P,o as Q,a8 as X,g as O,W as Y,a9 as z,r as F,y as Z,aa as b,ab as G,C as $,A as V,ac as H,ad as B,ae as N,af as j,ag as U,ah as ee,ai as ae,aj as re,ak as ne,al as ie,q as le,am as fe,an as ue}from"./index-IMIXtIBA.js";let te=!1;function oe(l,e){return e}function se(l,e,a,t){for(var v=[],d=e.length,_=0;_<d;_++)re(e[_].e,v,!0);var c=d>0&&v.length===0&&a!==null;if(c){var h=a.parentNode;ne(h),h.append(a),t.clear(),x(l,e[0].prev,e[d-1].next)}ie(v,()=>{for(var o=0;o<d;o++){var s=e[o];c||(t.delete(s.k),x(l,s.prev,s.next)),le(s.e,!c)}})}function he(l,e,a,t,v,d=null){var _=l,c={flags:e,items:new Map,first:null},h=(e&X)!==0;if(h){var o=l;_=o.appendChild(P())}var s=null,I=!1,n=Y(()=>{var u=a();return ee(u)?u:u==null?[]:G(u)});Q(()=>{var u=O(n),r=u.length;I&&r===0||(I=r===0,ve(u,c,_,v,e,t,a),d!==null&&(r===0?s?z(s):s=F(()=>d(_)):s!==null&&Z(s,()=>{s=null})),O(n))})}function ve(l,e,a,t,v,d,_){var R,q,D,L;var c=(v&ae)!==0,h=(v&(H|N))!==0,o=l.length,s=e.items,I=e.first,n=I,u,r=null,w,p=[],E=[],g,C,i,f;if(c)for(f=0;f<o;f+=1)g=l[f],C=d(g,f),i=s.get(C),i!==void 0&&((R=i.a)==null||R.measure(),(w??(w=new Set)).add(i));for(f=0;f<o;f+=1){if(g=l[f],C=d(g,f),i=s.get(C),i===void 0){var J=n?n.e.nodes_start:a;r=_e(J,e,r,r===null?e.first:r.next,g,C,f,t,v,_),s.set(C,r),p=[],E=[],n=r.next;continue}if(h&&de(i,g,f,v),(i.e.f&b)!==0&&(z(i.e),c&&((q=i.a)==null||q.unfix(),(w??(w=new Set)).delete(i))),i!==n){if(u!==void 0&&u.has(i)){if(p.length<E.length){var T=E[0],A;r=T.prev;var S=p[0],k=p[p.length-1];for(A=0;A<p.length;A+=1)W(p[A],T,a);for(A=0;A<E.length;A+=1)u.delete(E[A]);x(e,S.prev,k.next),x(e,r,S),x(e,k,T),n=T,r=k,f-=1,p=[],E=[]}else u.delete(i),W(i,n,a),x(e,i.prev,i.next),x(e,i,r===null?e.first:r.next),x(e,r,i),r=i;continue}for(p=[],E=[];n!==null&&n.k!==C;)(n.e.f&b)===0&&(u??(u=new Set)).add(n),E.push(n),n=n.next;if(n===null)continue;i=n}p.push(i),r=i,n=i.next}if(n!==null||u!==void 0){for(var m=u===void 0?[]:G(u);n!==null;)(n.e.f&b)===0&&m.push(n),n=n.next;var M=m.length;if(M>0){var K=(v&X)!==0&&o===0?a:null;if(c){for(f=0;f<M;f+=1)(D=m[f].a)==null||D.measure();for(f=0;f<M;f+=1)(L=m[f].a)==null||L.fix()}se(e,m,K,s)}}c&&$(()=>{var y;if(w!==void 0)for(i of w)(y=i.a)==null||y.apply()}),V.first=e.first&&e.first.e,V.last=r&&r.e}function de(l,e,a,t){(t&H)!==0&&B(l.v,e),(t&N)!==0?B(l.i,a):l.i=a}function _e(l,e,a,t,v,d,_,c,h,o){var s=(h&H)!==0,I=(h&ue)===0,n=s?I?j(v):U(v):v,u=(h&N)===0?_:U(_),r={i:u,v:n,k:d,a:null,e:null,prev:a,next:t};try{return r.e=F(()=>c(l,n,u,o),te),r.e.prev=a&&a.e,r.e.next=t&&t.e,a===null?e.first=r:(a.next=r,a.e.next=r.e),t!==null&&(t.prev=r,t.e.prev=r.e),r}finally{}}function W(l,e,a){for(var t=l.next?l.next.e.nodes_start:a,v=e?e.e.nodes_start:a,d=l.e.nodes_start;d!==t;){var _=fe(d);v.before(d),d=_}}function x(l,e,a){e===null?l.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}export{he as e,oe as i};
